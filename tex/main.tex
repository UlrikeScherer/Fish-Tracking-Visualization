\let\mypdfximage\pdfximage
\def\pdfximage{\immediate\mypdfximage}
\documentclass[landscape]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage[a4paper, inner=1em, outer=1em, top=1em]{geometry}
\usepackage{pgffor}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{hyperref}
\usepackage{ifthen}
\usepackage[nomessages]{fp}% http://ctan.org/pkg/fp
\usepackage{adjustbox}
\usepackage{tcolorbox}
\usepackage{xstring}
\usepackage{xurl}
\usepackage{etoolbox}
\usepackage{nopageno}
\usepackage{tabularx}

\input{arrayoflinks.tex}

\newcounter{daycnt}
\newcounter{subcnt}
\providecommand{\camera}{default-error}
\providecommand{\position}{position}
\providecommand{\block}{blockX}
\providecommand{\secfirstplot}{42}
\providecommand{\posstr}{POSITION_STRING/}
\graphicspath{{../plots/\block/\position/}} 

%\renewcommand{\posstr}{FE_\block_autotracks_\position/}

\providecommand{\rootserver}{/ROOT_DIRECTORY}
\providecommand{\rootrecord}{/RECORING_DIRECTORY}
\providecommand{\rootcsv}{/CSV_DIRECTORY}

\title{Developing exploration behavior\\
Trajectory over time of the molly at camera: \camera{} and position: \textsc{\position}\\
From the 10th of September to the 8th of November.\\
\block \\
}
\author{Research Unit 1, SCIoI Project 21}
\date{December 2021}

\newcommand{\subf}[2]{%
\begin{subfigure}[h]{0.22\textwidth}
    \includegraphics[width=\textwidth, height=4.2cm]{\camera/#1/#2.pdf}
    \caption*{\getsub{\thesubcnt}, \getcsv{\thesubcnt}}
    \stepcounter{subcnt}
    \vspace{-1em}
\end{subfigure}
}

\newcommand{\firstbox}[1]{
    {\footnotesize
    Video: \url{\gettext{\thedaycnt}}\\
    \stepcounter{daycnt}
    CSV: \url{file://\rootcsv/\posstr\camera/#1.\camera/}\\}
    \parbox[c][3cm]{0.21\textwidth}{\StrMid{#1}{0}{4}/\StrMid{#1}{5}{6}/\StrMid{#1}{7}{8}{} at \StrMid{#1}{10}{11}:\StrMid{#1}{12}{13}\\
     Trajectory over time of the molly at camera: \camera{} position: \textsc{\position}\\
     }
}

\newcommand{\plotday}[1]{%
\foreach \x [count=\xi] in {#1} {
\begin{figure}
    \firstbox{\x00}
    \foreach \i in {0,1,...,3} {
        \foreach \j in {0,1,...,3}{
        \FPeval{\result}{clip(\i+\j)}
        \ifnum \result>0  {
            \subf{\x}{\i\j}
        }\fi
        }\vskip\baselineskip
    }
    \label{fig:\xi #1}
\end{figure}
}%
}

\newcommand{\plotdayone}[1]{%
%\foreach \x [count=\xi] in {#1} {
\begin{figure}
    \firstbox{#1\secfirstplot}
    \foreach \i in {0} {
        \foreach \j in {0,1,...,3}{
        \FPeval{\result}{clip(\i+\j)}
        \ifnum \result>0  {
            \subf{#1}{\i\j}
        }\fi
        }\vskip\baselineskip
    }
    \subf{#1}{10}
    \label{fig:#1}
\end{figure}
%}%
}

\begin{document}

\maketitle  
\begin{center}
\subsection*{Legend}
\begin{tabular}{p{1cm} p{7cm} }
    $\mu + \sigma$ & illustrates the mean $\mu$ of step length per frame and its standard derivation $\sigma$ for a batch. \\
    $\sum_{\alpha_i}$ & is the sum of angles $\alpha$ taken anti-clockwise and where each $\alpha_i \in [-\pi, \pi]$.  \\
    $\alpha_{avg}$ & is the average turning angle for each batch in radians. \\
    $\# spikes$ & the number of steps per frame that exceed the limit of the overall $\mu$ and $\sigma$ by the following formula $\mu + 3 \cdot \sigma = 0.2274 + 3 \cdot 1.004 = 3.4246$. \\
    $N$ & number of valid data point for a batch. A batch of trajectory data points for a time of 30 min contains originally 9999 data points. \\
\end{tabular}
    
\end{center}

\input{days_array.tex}
%\plotdayone{\day0} 
%\plotdayone{20210910_1550} 

%\plotday{
%20210911_0600,20210912_0600,20210913_0600,20210914_0600,20210915_0600,20210916_0600,20210917_0600,20210918_0600,20210919_0600,20210920_0600,20210921_0600,20210922_0600,20210923_0600,20210924_0600,20210925_0600,20210926_0600,20210927_0600,20210928_0600,20210929_0600,20210930_0600,20211001_0600,20211002_0600,20211003_0600,20211004_0600,20211005_0600,20211006_0600,20211007_0600,20211008_0600
%}

\end{document}
